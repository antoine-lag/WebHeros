<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<head>
	<meta charset="UTF-8">
	<title>Aventure</title>
</head>
<body>
	<div ng-app="webHerosApp" ng-controller="webHerosCtrl"> 
		<h1>Vous naviguez dans l'aventure {{aventureName}}</h1>
		
		<div ng-show="showSituationText">
			<h3>{{situation.text}}</h3>
		</div>
		<br>
		
		</div ng-show="showChoicesList">
			<ul>
				<li ng-repeat="c in situation.choix">{{c.text}}
				</li>
			</ul>
		</div>
		<br>
		
		<div ng-show="showAddSituation">
			<a href="/AjoutSitutation.html">Ajouter une situation</a>
		</div>
		
		<a href="/index.html">Accueil</a>
		
		<div ng-show="showMessage">
			{{message}}
		</div>
	</div>
	
<script>
function initVars(scope) {
	scope.situation = new Object();//Not sure
	scope.aventure = new Object();
	scope.message = "___";
	scope.aventureName = "Loading...";
}
function initView(scope) {
	scope.showSituationText = true;
	scope.showChoicesList = true;
	scope.showAddSituation = false;
	scope.showMessage = false;
}
function initSituation(scope, http){
	http.get("rest/getAventureName").then(function(response) {
		if (response.status == 200) {
			console.log(response);
			scope.aventureName = response.data.aventureName;
		} else {
			scope.message = "failed to get list of persons";
			scope.showMessage = true;
		}
	});
}

function selectChoice(button, scope, http) {
	initView(scope);
	initVars(scope);
	switch (button) {
		case "addPerson" :
			scope.showAddPerson = true;
			break;
		case "addAddress" :
			scope.showAddAddress = true;
			break;
		case "associate" :
			
			break;
	}
}


var app = angular.module('webHerosApp', []);
app.controller('webHerosCtrl', function($scope,$http) {
	initVars($scope);
 	initView($scope);
 	initSituation($scope, $http);
    $scope.doChoice=function(button) {selectChoice(button,$scope,$http);}
});
	
</script>
</body>
</html>